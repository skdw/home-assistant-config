- id: 'switch2light_on'
  alias: YAML Lights - On switch enabled turn light ON
  variables:
    lights: !include variables_lights.yaml
    switches: !include variables_switches.yaml
  mode: parallel
  trigger:
  - platform: state
    entity_id: !include variables_switches.yaml
    to: 'on'
  condition:
  - condition: template
    value_template: "{{ states(lights[switches.index(trigger.entity_id)]) == 'off' }}"
  action:
    - service: light.turn_on
      target:
        entity_id: "{{ lights[switches.index(trigger.entity_id)] }}"
- id: 'switch2light_off'
  alias: YAML Lights - On switch disabled turn light OFF
  variables:
    lights: !include variables_lights.yaml
    switches: !include variables_switches.yaml
  mode: parallel
  trigger:
  - platform: state
    entity_id: !include variables_switches.yaml
    to: 'off'
  condition:
  - condition: template
    value_template: "{{ states(lights[switches.index(trigger.entity_id)]) == 'on' }}"
  action:
    - service: light.turn_off
      target:
        entity_id: "{{ lights[switches.index(trigger.entity_id)] }}"
- id: 'light2switch_on'
  alias: YAML Lights - On light enabled turn switch ON
  variables:
    lights: !include variables_lights.yaml
    switches: !include variables_switches.yaml
  mode: parallel
  trigger:
  - platform: state
    entity_id: !include variables_lights.yaml
    to: 'on'
  condition:
  - condition: template
    value_template: "{{ states(switches[lights.index(trigger.entity_id)]) == 'off' }}"
  action:
    - service: switch.turn_on
      target:
        entity_id: "{{ switches[lights.index(trigger.entity_id)] }}"
- id: 'light2switch_off'
  alias: YAML Lights - On light disabled turn switch OFF
  variables:
    lights: !include variables_lights.yaml
    switches: !include variables_switches.yaml
  mode: parallel
  trigger:
  - platform: state
    entity_id: !include variables_lights.yaml
    to: 'off'
  condition:
  - condition: template
    value_template: "{{ states(switches[lights.index(trigger.entity_id)]) == 'on' }}"
  action:
    - service: switch.turn_off
      target:
        entity_id: "{{ switches[lights.index(trigger.entity_id)] }}"

